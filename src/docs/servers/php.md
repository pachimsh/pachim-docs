---
title : "php سرور"
---

# PHP

### جدول محتوا

## بررسی اجمالی 

یکی از مواردی که در پچیم توجه ویژه‌ای به آن داشته‌ایم موضوع نصب و مدیریت چندین ورژن از PHP به شکل همزمان بر روی سرورهای شماست. هر PHP که در سرور شما راه اندازی می‌شود FPM پردازشی خودش را دارد و شما هر زمان که مایل باشید می‌توانید از طریق پَنل پچیم [ورژن PHP سایت مورد نظر خود را آپدیت](http://sites/the-basics#ورژن-php) کنید.

:::note{.danger}

::title[نصب دستی PHP روی سرور]

اگر شما با استفاده از SSH و به شکل دستی ورژنی از PHP را بر روی سرور خود نصب کنید، پچیم از این موضوع مطلع نخواهد شد و هیچ کنترلی از طریق پنل کاربری پچیم بر روی آن ورژن از PHP نمی‌توانید داشته باشید. بنابراین پیشنهاد می‌کنیم تا زمانی که ورژنی از طرف خود پچیم ارائه نشده آن را در روی سرور نصب نکنید.

:::

## چندین نسخه PHP

زمانی که شما در پچیم سروری را راه اندازی می‌کنید، اگر نوع آن سرور دارای PHP باشد در هنگام راه اندازی باید مشخص کنید کدام ورژن از PHP در راه اندازی ابتدایی به عنوان ورژن پیشفرض بر روی سرور نصب شود.

بعد از راه اندازی کامل سرور با مراجعه به بخش مدیریت PHP در پنل سرور پچیم می‌توانید در کنار اینکه ورژن فعلی نصب شده را کنترل و پیکربندی کنید، می‌توانید ورژن‌های دیگر PHP را نصب و راه اندازی کنید.

### نصب ورژن جدید PHP

نصب ورژن جدید PHP در پچیم هیچ کار خاصی ندارد تنها کافیست وارد پنل PHP سرورتان شوید و بر روی دکمه نصب ورژن مورد نظر PHP کلیک کنید، بعد از آنکه پروسه نصب کامل شد، شما می‌توانید از ورژن نصب شده برای ایجاد وبسایت مورد نظر یا تغییر ورژن PHP سایت خود استفاده کنید.

زمانی که ورژن جدید PHP نصب شود، پچیم یک فایل پیکربندی PHP-FPM برای آن ورژن ایجاد می‌کند تا شما بتوانید به شکل جداگانه‌ای از ورژن‌های دیگر، تنظیمات ورژن مورد نظر PHP خود را تغییر دهید و معنی این موضوع این است که شما به سادگی می‌توانید بر روی یک سرور چندین ورژن از PHP را داشته باشید.

### حذف ورژن اضافه PHP

شما تنها در صورتی می‌توانید یک ورژن از PHP را حذف کنید که :

- ورژن دیگری از PHP بر روی سرور شما وجود داشته باشد.
- ورژن PHP مورد نظر شما بر روی سرورتان ورژن پیش فرض نباشد.
- ورژن مورد نظر PHP شما ورژن پیش فرض CLI سرورتان نباشد.
- ورژن مورد نظر توسط هیچ سایتی مورد استفاده قرار نگیرد.
- هیچ صفی در وبسایت‌های شما از ورژن مورد نظر PHP استفاده نکند.

اگر موارد بالا در مورد ورژن PHP مورد نظرتان صادق باشد، شما می‌توانید ورژن PHP خود را از سرورتان حذف کنید.

:::note{.danger}

::title[حذف دستی PHP]

هر گونه حذف دستی توسط شما از طریق SSH از طرف پچیم قابل پذیرش نیست و اگر بعد از حذف دستی مشکلی برای سرورتان پیش بیاید، مسئولیت آن با شماست. بنابراین لطفا تمام اقدامات مورد نظر PHP را از طریق پنل کاربری پچیم انجام دهید.

:::

### PHP در ترمینال (CLI)

زمانی که ورژنی از PHP در سرور شما نصب می‌شود همیشه می‌توانید با استفاده از ترمینال و دسترسی SSH از آن بر روی سرور خود استفاده کنید تنها کایست به شکل باینری آن را صدا بزنید یعنی `phpx.x` و بجای `x.x` ورژن مورد نظر خود را قرار دهید (برای مثال اگر ورژن 8.1 پی اچ پی را نصب دارید تنها کافیست در ترمینال `php8.1 -v` را اجرا کنید تا بببینید بدون مشکل برای شما قابل دسترس است)

البته شما می‌توانید یک ورژن پیشفرض برای CLI نیز داشته باشید، تنها کافیست از پنل سرور پچیم یکی از ورژن‌های نصب شده PHP را به عنوان پیشفرض CLI انتخاب کنید. بعد از آن بدون وارد کردن ورژن باینری php و تنها با اجرای دستور php -v میبینید که ورژنی که به عنوان پیش فرض انتخاب شده در دسترس قرار میگیرد.
### نصب PHP پیشفرض 

ورژن پیشفرض PHP برای زمانی است که شما تصمیم دارید سایتی به سرورتان اضافه کنید و با انتخاب یک ورژن از PHP به عنوان ورژن پیشفرض در هنگام ایجاد سایت آن ورژن برای سایت شما انتخاب می‌شود البته شما توانایی تغییر آن را خواهید داشت.

توجه کنید تغییر ورژن پیشفرض PHP، ورژن وبسایت‌های که از قبل با ورژن پیشفرض ایجاد شده‌اند را تغییر نمی‌دهد و تغییر تنها برای سایت‌های جدید خواهد بود. 

### آپدیت ورژن PHP با نصب Patch

زمانی که شما ورژنی از PHP را بر روی سرور خود نصب می‌کنید ممکن است هر زمانی برای آن ورژن آپدیتی منتشر شود تا باگ‌های مختلف آن ورژن را مرتفع کند.

این آپدیت به شکل اتوماتیک بر روی سروتان انجام نمی‌شود در این زمان شما می‌توانید از دکمه‌ای با عنوان **پچ کردن** برای آپدیت ورژن مورد نظر PHP خود استفاده کنید تا به سادگی باگ‌های مورد نظر برطرف شوند استفاده کنید.

### نسخه‌های بتا PHP و شرایط انتشار 

در پچیم گاهی اوقات ورژن‌های از PHP که در حالت **بتا** یا حالت **کاندیدای نسخه نهایی** قرار دارند چند هفته قبل از انتشار نهایی PHP برای استفاده در سرور در اختیار شما قرار میگیرند تا با استفاده از آن‌ها بتوانید وبسایت‌های خود را در ورژن جدید PHP تست کنید. 

البته دقت کنید در این ورژن ممکن است بعضی از موارد به درستی کار نکنند یا بعضی از کانفیگ‌ها برای این ورژن در دسترس قرار نگیرد اما بعد از انتشار ورژن نهایی شما باید یکبار ورژن مورد نظر را از طریق پنل PHP کاملا حذف و مجددا آن را نصب کنید.

## پیکربندی تنظیمات متداول PHP

زمانی که وارد صفحه مدیریت PHP سرور در پچیم می‌شوید در همان بالای صفحه با مواردی همچون :

- حداکثر حجم آپلود
- حداکثر زمان اجرا شدن کد
- Opcache

مواجه می‌شوید که جز موارد مهم PHP هستند و از آن بخش می‌توانید آن‌ها را کنترل کنید.


:::note{.danger}

::title[تغییر پیکربندی تنظیمات]

تغییر تنظیمات عنوان‌های زیر در همه ورژن‌های PHP انجام می‌شود و مختص به ورژن خاصی نخواهد بود پس در تعیین این موارد دقت کنید.

:::


### حداکثر حجم آپلود

این عدد مقدار حجمی است که توسط PHP می‌تواند بر روی سرور آپلود شود. توجه داشته باشید که عدد مورد نظر در قالب مگابایت ثبت می‌شود. برای مثال برای 1 گیگ باید مقدار 1024 را ثبت کنید.

### حداکثر زمان اجرا شدن کد PHP

این مقدار حداکثر زمانی است که کدهای شما توسط php میتواند در حالت اجرا باشد و اگر بیشتر از آن طول بکشد php به شما ارور بر می‌گرداند. عددی که در تنظیمات آن را وارد می‌کنید به شکل ثانیه مورد استفاده قرار می‌گیرد.

### کش PHP با Opcache

ابزار Opcache کدهای PHP پروژه شما را کامپایل می‌کند و در RAM سرور شما قرار می‌دهد اینکار باعث افزایش چشمگیر سرعت اجرا کدهای شما خواهد شود مخصوصا اگر وبسایت شما دارای بازدید زیادی باشد، این تنظیم می‌تواند تاثیر زیادی را در بهینه سازی سایت شما داشته باشد.


:::note{.danger}

::title[نکته بسیار مهم]

توجه کنید که اگر قابلیت Opcache را برای سرور خود فعال کردید، کدهای PHP شما کش می‌شوند و اگر شما تغییری در کدهای خود به شکل مستقیم بوجود آوردید، تا زمانی که کش کدهای شما وجود داشته باشد، نمیتوانید تغییری را مشاهده کنید.

اگر از اسکریپت استقرار در پچیم استفاده می‌کنید حتما باید کد مربوط به [`ریست کردن opcache`](/servers/help-instructions#ریست-کردن-fpm-و-opcache) را در اسکریپت استقرار قرار دهید یا اگر قصد دارید به شکل دستی این کار را انجام بدید بخش [`ریست کردن opcache`](/servers/help-instructions#ریست-کردن-fpm-و-opcache) را مطالعه کنید

:::
